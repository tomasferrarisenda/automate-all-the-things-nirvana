apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.system }}-{{ .Values.service }}-{{ .Values.environment }}-k8s-secret
data:
  PASSWORD: eyJQQVNTV09SRCI6ImF1dG9tYXRlLWFsbC10aGUtdGhpbmdzLWRldiJ9Cg== # {"PASSWORD":"automate-all-things-dev"}
type: Opaque

---

apiVersion: secretsmanager.aws.upbound.io/v1beta1
kind: Secret
metadata:
  name: {{ .Values.system }}-{{ .Values.service }}-{{ .Values.environment }}-crossplane-secret
spec:
  forProvider:
    name: {{ .Values.system }}-{{ .Values.service }}-{{ .Values.environment }}-secret
    recoveryWindowInDays: 0
    region: {{ .Values.region }}
    replica:
      - region: us-west-1
  providerConfigRef:
    name: aws

---

apiVersion: secretsmanager.aws.upbound.io/v1beta1
kind: SecretVersion
metadata:
  name: {{ .Values.system }}-{{ .Values.service }}-{{ .Values.environment }}-secretversion
spec:
  forProvider:
    region: {{ .Values.region }}
    secretIdRef:
      name: {{ .Values.system }}-{{ .Values.service }}-{{ .Values.environment }}-crossplane-secret
    secretStringSecretRef:
      name: {{ .Values.system }}-{{ .Values.service }}-{{ .Values.environment }}-k8s-secret
      namespace: {{ .Values.system }}-{{ .Values.environment }}
      key: PASSWORD
  providerConfigRef:
    name: aws